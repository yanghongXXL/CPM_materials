<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>第 6 部分 R入门 | 临床预测模型</title>
<meta name="author" content="杨 弘">
<meta name="description" content="6.1 基础拾遗  6.1.1 Rstudio 设置 初识Rstudio Rstudio 默认由四个窗口组成，分别为：代码编辑窗口，环境变量窗口，控制台，以及绘图帮助窗口。窗口可以通过拖动分割柱移动。 个性化 Tools -&gt; Global Options -&gt; Appearance -&gt; 设定喜欢的编辑界面 packages 下载镜像设置 Tools -&gt; Global Options...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="第 6 部分 R入门 | 临床预测模型">
<meta property="og:type" content="book">
<meta property="og:image" content="/images/封面.png">
<meta property="og:description" content="6.1 基础拾遗  6.1.1 Rstudio 设置 初识Rstudio Rstudio 默认由四个窗口组成，分别为：代码编辑窗口，环境变量窗口，控制台，以及绘图帮助窗口。窗口可以通过拖动分割柱移动。 个性化 Tools -&gt; Global Options -&gt; Appearance -&gt; 设定喜欢的编辑界面 packages 下载镜像设置 Tools -&gt; Global Options...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第 6 部分 R入门 | 临床预测模型">
<meta name="twitter:description" content="6.1 基础拾遗  6.1.1 Rstudio 设置 初识Rstudio Rstudio 默认由四个窗口组成，分别为：代码编辑窗口，环境变量窗口，控制台，以及绘图帮助窗口。窗口可以通过拖动分割柱移动。 个性化 Tools -&gt; Global Options -&gt; Appearance -&gt; 设定喜欢的编辑界面 packages 下载镜像设置 Tools -&gt; Global Options...">
<meta name="twitter:image" content="/images/封面.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">临床预测模型</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">关于课程</a></li>
<li><a class="" href="%E6%A1%88%E4%BE%8B%E6%95%99%E5%AD%A6-1.html">案例教学</a></li>
<li><a class="" href="%E5%81%A5%E5%BA%B7%E5%8C%BB%E7%96%97%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E4%B8%8B%E7%9A%84%E4%B8%B4%E5%BA%8A%E7%A7%91%E7%A0%94.html"><span class="header-section-number">1</span> 健康医疗大数据驱动下的临床科研</a></li>
<li><a class="" href="%E6%A1%88%E4%BE%8B%E4%BB%8B%E7%BB%8D.html"><span class="header-section-number">2</span> 案例介绍</a></li>
<li><a class="" href="%E5%AE%9E%E6%93%8D%E6%95%99%E5%AD%A6-1.html">实操教学</a></li>
<li><a class="" href="r-%E5%AE%9E%E6%93%8D.html"><span class="header-section-number">3</span> R 实操</a></li>
<li><a class="" href="python-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%85%A5%E9%97%A8.html"><span class="header-section-number">4</span> Python 安装与入门</a></li>
<li><a class="" href="r%E5%AE%89%E8%A3%85%E4%B8%8E%E5%85%A5%E9%97%A8.html"><span class="header-section-number">5</span> R安装与入门</a></li>
<li><a class="active" href="r%E5%85%A5%E9%97%A8-1.html"><span class="header-section-number">6</span> R入门</a></li>
<li><a class="" href="nhanes%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D.html"><span class="header-section-number">7</span> NHANES数据库介绍</a></li>
<li><a class="" href="mimic%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D.html"><span class="header-section-number">8</span> MIMIC数据库介绍</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r入门-1" class="section level1" number="6">
<h1>
<span class="header-section-number">第 6 部分</span> R入门<a class="anchor" aria-label="anchor" href="#r%E5%85%A5%E9%97%A8-1"><i class="fas fa-link"></i></a>
</h1>
<div id="基础拾遗" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> 基础拾遗<a class="anchor" aria-label="anchor" href="#%E5%9F%BA%E7%A1%80%E6%8B%BE%E9%81%97"><i class="fas fa-link"></i></a>
</h2>
<div id="rstudio-设置" class="section level3" number="6.1.1">
<h3>
<span class="header-section-number">6.1.1</span> Rstudio 设置<a class="anchor" aria-label="anchor" href="#rstudio-%E8%AE%BE%E7%BD%AE"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>初识Rstudio</li>
</ul>
<p>Rstudio 默认由四个窗口组成，分别为：代码编辑窗口，环境变量窗口，控制台，以及绘图帮助窗口。窗口可以通过拖动分割柱移动。</p>
<div class="inline-figure"><img src="images/paste-46EC392B.png" style="width:100.0%"></div>
<ul>
<li>个性化</li>
</ul>
<p>Tools -&gt; Global Options -&gt; Appearance -&gt; 设定喜欢的编辑界面</p>
<ul>
<li>packages 下载镜像设置</li>
</ul>
<p>Tools -&gt; Global Options -&gt; Packages -&gt; primary CRAN repository -&gt;changes(选择距离你最近的镜像)</p>
<div class="inline-figure"><img src="images/paste-41D896CE.png" style="width:100.0%"></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="r%E5%85%A5%E9%97%A8-1.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 下载 R 包：</span></span>
<span id="cb72-2"><a href="r%E5%85%A5%E9%97%A8-1.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)  注意打上英文的引号哦！ Ctrl<span class="sc">+</span>enter 运行！！</span></code></pre></div>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 加载 R 包：</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span> <span class="co"># 注意并不需要引号哦！</span></span></code></pre></div>
<p><strong>注意！ R 包安装成功后，要及时注释安装语句，避免重复安装。</strong></p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("tidyverse")</span></span></code></pre></div>
<p><strong>注释： R 语言中，在代码前面加 “#” 号表示该行后面的内容为解释性语句，默认不运行。快捷键:Ctrl+shift+C</strong></p>
</div>
<div id="创建一个-r-脚本" class="section level3" number="6.1.2">
<h3>
<span class="header-section-number">6.1.2</span> 创建一个 R 脚本<a class="anchor" aria-label="anchor" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-r-%E8%84%9A%E6%9C%AC"><i class="fas fa-link"></i></a>
</h3>
<p>快捷键 Ctrl+shift+N, 或点击右上角绿色加号 -&gt; R Script。</p>
<p>R 脚本（后缀名.R）是我们在上面编写程序以实现特定功能的文档。</p>
<ul>
<li>写脚本的注意事项:</li>
</ul>
<ol style="list-style-type: decimal">
<li>脚本不应太长，一个脚本实现一个任务；</li>
<li>养成注释的好习惯 (ctrl+shift+c)；</li>
</ol>
<ul>
<li><p>保存脚本：</p></li>
<li>
<p>打开脚本：</p>
<p>如果出现中文为乱码，则点击 File -&gt; Reopen with Encoding -&gt; 选择其他中文编码。常见的中文编码类型有； UTF-8， GBK 等。</p>
</li>
</ul>
</div>
<div id="演示" class="section level3" number="6.1.3">
<h3>
<span class="header-section-number">6.1.3</span> 演示：<a class="anchor" aria-label="anchor" href="#%E6%BC%94%E7%A4%BA"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>设定工作路径:</li>
</ul>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set working directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">"D:\\数据"</span><span class="op">)</span> <span class="co"># 注意：斜杠与反斜杠，双反斜杠的不同</span></span></code></pre></div>
<ul>
<li>加载 R 包：</li>
</ul>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
<ul>
<li>读取数据:</li>
</ul>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"data/CardiovascularDataset.csv"</span>,header <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> </span>
<span><span class="co"># header=True 表示有表头</span></span></code></pre></div>
<p>这个语句里面， read.csv 表示在当前工作路径下，读取一个名为 data.csv 的文档； header=T 表示表头为真， T 为 TRUE 的缩写。然后，通过赋值符号”&lt;-“将读取的数据存储在变量 mydata 这里</p>
<ul>
<li>查看数据:</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span> <span class="co">#col 为 colnumn 的前三个字母</span></span></code></pre></div>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看数据结构</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span><span class="co"># str 为 structure 的前三个字母</span></span></code></pre></div>
<pre><code>## 'data.frame':    303 obs. of  14 variables:
##  $ age     : int  63 53 41 56 60 57 56 44 52 57 ...
##  $ sex     : int  1 1 0 1 1 1 0 1 1 1 ...
##  $ cp      : int  3 0 1 1 0 0 1 1 2 2 ...
##  $ trestbps: int  145 140 130 120 130 140 140 120 172 150 ...
##  $ chol    : int  233 203 204 236 206 192 294 263 199 168 ...
##  $ fbs     : int  1 1 0 0 0 0 0 0 1 0 ...
##  $ restecg : int  0 0 0 1 0 1 0 1 1 1 ...
##  $ thalach : int  150 155 172 178 132 148 153 173 162 174 ...
##  $ exang   : int  0 1 0 0 1 0 0 0 0 0 ...
##  $ oldpeak : num  2.3 3.1 1.4 0.8 2.4 0.4 1.3 0 0.5 1.6 ...
##  $ slope   : int  0 0 2 2 1 1 1 2 2 2 ...
##  $ ca      : int  0 0 0 0 2 0 0 0 0 0 ...
##  $ thal    : int  1 3 2 2 3 1 2 3 3 2 ...
##  $ target  : int  1 0 1 1 0 1 1 1 1 1 ...</code></pre>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看分类变量的取值（唯一值）</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span> <span class="co"># 美元符号 $ 表示索引，按变量名索引。</span></span></code></pre></div>
<pre><code>## [1] 1 0</code></pre>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">target</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="一些快捷键" class="section level3" number="6.1.4">
<h3>
<span class="header-section-number">6.1.4</span> 一些快捷键<a class="anchor" aria-label="anchor" href="#%E4%B8%80%E4%BA%9B%E5%BF%AB%E6%8D%B7%E9%94%AE"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>窗口可以通过拖动分割柱移动，也可以使用快捷键控制。比如：<strong>Ctrl+shift+1</strong>(2\3\4)</p></li>
<li><p>创建一个R脚本 ——<strong>Ctrl+shift+N</strong></p></li>
<li><p>快速注释——<strong>Ctrl+shift+C</strong></p></li>
<li><p>善于利用小标题实现功能分区（<strong>ctrl+shift+r</strong>）</p></li>
<li><p><strong>ctrl+alt+r</strong> ——快速插入代码框</p></li>
<li><p>注释（Ctrl+shift+c）； # ；</p></li>
<li><p>赋值（Alt+-）： =, &lt;- ;</p></li>
<li><p>函数的标志： ();</p></li>
<li><p>变量索引： $;</p></li>
<li><p>管道操作符： %&gt;%， |&gt;：读作 “然后” ;</p></li>
<li><p>比较或判断： &gt;, &lt; , &gt;=, &lt;=, ==, != ；</p></li>
<li><p>逻辑运算： &amp;(与), |(或), !(非) ;</p></li>
<li><p>算数运算： +， -， *， /, ^, %%(取余), %/%(整除)。</p></li>
</ol>
</div>
</div>
<div id="数据基本操作" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> 数据基本操作<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><i class="fas fa-link"></i></a>
</h2>
<div id="读取数据" class="section level3" number="6.2.1">
<h3>
<span class="header-section-number">6.2.1</span> 读取数据<a class="anchor" aria-label="anchor" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/CardiovascularDataset.csv"</span><span class="op">)</span> <span class="co"># 读取数据</span></span>
<span><span class="co"># knitr::kable(mydata, align = "c")</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span> <span class="co"># 查看表头</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span> <span class="co"># 查看数据结构</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">cause</span><span class="op">)</span> <span class="co"># 查看分类变量的取值（唯一值）</span></span>
<span><span class="co"># 其他查看数据的函数</span></span>
<span><span class="co"># summary(mydata)</span></span>
<span><span class="co"># head(mydata)</span></span>
<span><span class="co"># tail(mydata)</span></span></code></pre></div>
</div>
<div id="选择数据" class="section level3" number="6.2.2">
<h3>
<span class="header-section-number">6.2.2</span> 选择数据<a class="anchor" aria-label="anchor" href="#%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata2</span> <span class="op">&lt;-</span> <span class="va">mydata</span> <span class="op">|&gt;</span> <span class="co"># 管道操作符： %&gt;% 或者 |&gt; ，读作然后</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">sex</span><span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">target</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">mydata2</span></span></code></pre></div>
<pre><code>##    age sex cp trestbps chol fbs restecg thalach exang
## 1   63   1  3      145  233   1       0     150     0
## 2   56   1  1      120  236   0       1     178     0
## 3   57   1  0      140  192   0       1     148     0
## 4   44   1  1      120  263   0       1     173     0
## 5   52   1  2      172  199   1       1     162     0
## 6   57   1  2      150  168   0       1     174     0
## 7   54   1  0      140  239   0       1     160     0
## 8   49   1  1      130  266   0       1     171     0
## 9   64   1  3      110  211   0       0     144     1
## 10  37   1  2      130  250   0       1     187     0
## 11  47   1  0      112  204   0       1     143     0
## 12  42   1  1      120  295   0       1     162     0
## 13  41   1  1      110  235   0       1     153     0
## 14  62   1  1      128  208   1       0     140     0
## 15  57   1  0      110  201   0       1     126     1
## 16  64   1  0      128  263   0       1     105     1
## 17  43   1  0      115  303   0       1     181     0
## 18  70   1  1      156  245   0       0     143     0
## 19  48   1  2      124  255   1       1     175     0
## 20  57   1  0      132  207   0       1     168     1
## 21  52   1  2      138  223   0       1     169     0
## 22  53   1  0      142  226   0       0     111     1
## 23  52   1  0      108  233   1       1     147     0
## 24  43   1  2      130  315   0       1     162     0
## 25  53   1  2      130  246   1       0     173     0
## 26  42   1  3      148  244   0       0     178     0
## 27  59   1  3      178  270   0       0     145     0
## 28  42   1  2      120  240   1       1     194     0
## 29  50   1  2      129  196   0       1     163     0
## 30  69   1  3      160  234   1       0     131     0
## 31  57   1  2      150  126   1       1     173     0
## 32  43   1  0      110  211   0       1     161     0
## 33  55   1  1      130  262   0       1     155     0
## 34  41   1  2      130  214   0       0     168     0
## 35  56   1  3      120  193   0       0     162     0
## 36  59   1  0      138  271   0       0     182     0
## 37  44   1  2      120  226   0       1     169     0
## 38  42   1  2      130  180   0       1     150     0
## 39  66   1  0      160  228   0       0     138     0
## 40  64   1  3      170  227   0       0     155     0
## 41  47   1  2      130  253   0       1     179     0
## 42  35   1  1      122  192   0       1     174     0
## 43  58   1  1      125  220   0       1     144     0
## 44  56   1  1      130  221   0       0     163     0
## 45  56   1  1      120  240   0       1     169     0
## 46  41   1  1      120  157   0       1     182     0
## 47  38   1  2      138  175   0       1     173     0
## 48  38   1  2      138  175   0       1     173     0
## 49  43   1  0      150  247   0       1     171     0
## 50  59   1  0      135  234   0       1     161     0
## 51  44   1  2      130  233   0       1     179     1
## 52  42   1  0      140  226   0       1     178     0
## 53  61   1  2      150  243   1       1     137     1
## 54  40   1  3      140  199   0       1     178     1
## 55  59   1  2      150  212   1       1     157     0
## 56  51   1  2      110  175   0       1     123     0
## 57  53   1  2      130  197   1       0     152     0
## 58  65   1  0      120  177   0       1     140     0
## 59  44   1  1      130  219   0       0     188     0
## 60  54   1  2      125  273   0       0     152     0
## 61  51   1  3      125  213   0       0     125     1
## 62  54   1  2      150  232   0       0     165     0
## 63  48   1  1      130  245   0       0     180     0
## 64  45   1  0      104  208   0       0     148     1
## 65  39   1  2      140  321   0       0     182     0
## 66  52   1  1      120  325   0       1     172     0
## 67  44   1  2      140  235   0       0     180     0
## 68  47   1  2      138  257   0       0     156     0
## 69  66   1  0      120  302   0       0     151     0
## 70  62   1  2      130  231   0       1     146     0
## 71  52   1  1      134  201   0       1     158     0
## 72  48   1  0      122  222   0       0     186     0
## 73  45   1  0      115  260   0       0     185     0
## 74  34   1  3      118  182   0       0     174     0
## 75  54   1  1      108  309   0       1     156     0
## 76  52   1  3      118  186   0       0     190     0
## 77  41   1  1      135  203   0       1     132     0
## 78  58   1  2      140  211   1       0     165     0
## 79  51   1  2      100  222   0       1     143     1
## 80  44   1  1      120  220   0       1     170     0
## 81  54   1  2      120  258   0       0     147     0
## 82  51   1  2       94  227   0       1     154     1
## 83  29   1  1      130  204   0       0     202     0
## 84  51   1  0      140  261   0       0     186     1
## 85  51   1  2      125  245   1       0     166     0
## 86  59   1  1      140  221   0       1     164     1
## 87  52   1  1      128  205   1       1     184     0
## 88  58   1  2      105  240   0       0     154     1
## 89  41   1  2      112  250   0       1     179     0
## 90  45   1  1      128  308   0       0     170     0
## 91  52   1  3      152  298   1       1     178     0
## 92  68   1  2      118  277   0       1     151     0
## 93  46   1  1      101  197   1       1     156     0
##    oldpeak slope ca thal target
## 1      2.3     0  0    1      1
## 2      0.8     2  0    2      1
## 3      0.4     1  0    1      1
## 4      0.0     2  0    3      1
## 5      0.5     2  0    3      1
## 6      1.6     2  0    2      1
## 7      1.2     2  0    2      1
## 8      0.6     2  0    2      1
## 9      1.8     1  0    2      1
## 10     3.5     0  0    2      1
## 11     0.1     2  0    2      1
## 12     0.0     2  0    2      1
## 13     0.0     2  0    2      1
## 14     0.0     2  0    2      1
## 15     1.5     1  0    1      1
## 16     0.2     1  1    3      1
## 17     1.2     1  0    2      1
## 18     0.0     2  0    2      1
## 19     0.0     2  2    2      1
## 20     0.0     2  0    3      1
## 21     0.0     2  4    2      1
## 22     0.0     2  0    3      1
## 23     0.1     2  3    3      1
## 24     1.9     2  1    2      1
## 25     0.0     2  3    2      1
## 26     0.8     2  2    2      1
## 27     4.2     0  0    3      1
## 28     0.8     0  0    3      1
## 29     0.0     2  0    2      1
## 30     0.1     1  1    2      1
## 31     0.2     2  1    3      1
## 32     0.0     2  0    3      1
## 33     0.0     2  0    2      1
## 34     2.0     1  0    2      1
## 35     1.9     1  0    3      1
## 36     0.0     2  0    2      1
## 37     0.0     2  0    2      1
## 38     0.0     2  0    2      1
## 39     2.3     2  0    1      1
## 40     0.6     1  0    3      1
## 41     0.0     2  0    2      1
## 42     0.0     2  0    2      1
## 43     0.4     1  4    3      1
## 44     0.0     2  0    3      1
## 45     0.0     0  0    2      1
## 46     0.0     2  0    2      1
## 47     0.0     2  4    2      1
## 48     0.0     2  4    2      1
## 49     1.5     2  0    2      1
## 50     0.5     1  0    3      1
## 51     0.4     2  0    2      1
## 52     0.0     2  0    2      1
## 53     1.0     1  0    2      1
## 54     1.4     2  0    3      1
## 55     1.6     2  0    2      1
## 56     0.6     2  0    2      1
## 57     1.2     0  0    2      1
## 58     0.4     2  0    3      1
## 59     0.0     2  0    2      1
## 60     0.5     0  1    2      1
## 61     1.4     2  1    2      1
## 62     1.6     2  0    3      1
## 63     0.2     1  0    2      1
## 64     3.0     1  0    2      1
## 65     0.0     2  0    2      1
## 66     0.2     2  0    2      1
## 67     0.0     2  0    2      1
## 68     0.0     2  0    2      1
## 69     0.4     1  0    2      1
## 70     1.8     1  3    3      1
## 71     0.8     2  1    2      1
## 72     0.0     2  0    2      1
## 73     0.0     2  0    2      1
## 74     0.0     2  0    2      1
## 75     0.0     2  0    3      1
## 76     0.0     1  0    1      1
## 77     0.0     1  0    1      1
## 78     0.0     2  0    2      1
## 79     1.2     1  0    2      1
## 80     0.0     2  0    2      1
## 81     0.4     1  0    3      1
## 82     0.0     2  1    3      1
## 83     0.0     2  0    2      1
## 84     0.0     2  0    2      1
## 85     2.4     1  0    2      1
## 86     0.0     2  0    2      1
## 87     0.0     2  0    2      1
## 88     0.6     1  0    3      1
## 89     0.0     2  0    2      1
## 90     0.0     2  0    2      1
## 91     1.2     1  0    3      1
## 92     1.0     2  1    3      1
## 93     0.0     2  0    3      1</code></pre>
<p>这里面出现了管道操作符号” |&gt; “, 这个符号读作：然后。所以这个语句的意思是：首先，选中 mydata，然后，选择 cause 为”HIV/AIDS” 的行，然后，选择年份为 2019 年的行，最后，将选择好的数据赋值给 mydata2。</p>
<p>特别注意： = 是赋值符， == 为判断符。</p>
</div>
<div id="保存数据" class="section level3" number="6.2.3">
<h3>
<span class="header-section-number">6.2.3</span> 保存数据<a class="anchor" aria-label="anchor" href="#%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">mydata2</span>, <span class="co"># 将 mydata2 这个数据</span></span>
<span><span class="st">"data/sex1_target.csv"</span><span class="op">)</span> <span class="co"># 保存为 HIV.csv 文件</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">mydata2</span>, file <span class="op">=</span> <span class="st">"mydata2.Rdata"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"mydata2.Rdata"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="数据类型与数据结构" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> 数据类型与数据结构<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><i class="fas fa-link"></i></a>
</h2>
<div id="常见的数据类型" class="section level3" number="6.3.1">
<h3>
<span class="header-section-number">6.3.1</span> 常见的数据类型<a class="anchor" aria-label="anchor" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><i class="fas fa-link"></i></a>
</h3>
<p>R 语言常见数据类型有：数值类型（numeric），字符串（character），逻辑（logical），其他： POSIXct,POSIXt 等。</p>
<ul>
<li>数值类型： 1， 2， 3， 4.5,3.8;</li>
</ul>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="fl">4.5</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "double"</code></pre>
<ul>
<li>字符串类型：“字符”， “123”， “ASIR”， “HIV”</li>
</ul>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="st">"123"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="st">"ASIR"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<ul>
<li>逻辑： TRUE， FALSE, T, F;</li>
</ul>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "logical"</code></pre>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "logical"</code></pre>
</div>
<div id="特殊数据类型-naninf-na-null" class="section level3" number="6.3.2">
<h3>
<span class="header-section-number">6.3.2</span> 特殊数据类型： NaN,Inf， NA， NULL<a class="anchor" aria-label="anchor" href="#%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-naninf-na-null"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p>NaN:Not a number, 计算出错时候出现，比如 0/0,Inf/Inf</p></li>
<li><p>Inf : 无穷</p></li>
<li><p>NA：not availabel，缺失值。 NA 值具有传染性，任何数值与之发生关系均会变为 NA</p></li>
<li><p>NULL：空值。空值与 NA 的区别：比如一个教室稀稀拉拉坐了十几个学生，那么没有学生的位置可以视为缺失，而空值表示连座位也没有。</p></li>
</ul>
</div>
<div id="数据类型的转换" class="section level3" number="6.3.3">
<h3>
<span class="header-section-number">6.3.3</span> 数据类型的转换<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>numeric 与 logical 可以转化为 character，而 character 转化为 numeric 或者 logical 有可能出错，产生 NA 值。</li>
</ul>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fl">1990</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="st">"1990"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="st">"ABC"</span><span class="op">)</span></span>
<span><span class="co">## Warning: 强制改变过程中产生了NA</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<ul>
<li>logical 可以转化为数值 0/1, 而在进行逻辑判断的时候， 0/1 也会被认为是 F/T</li>
</ul>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/logical.html">as.logical</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="数据结构" class="section level3" number="6.3.4">
<h3>
<span class="header-section-number">6.3.4</span> 数据结构<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>标量</li>
</ul>
<p>单个元素组成的数据结构，比如”A”,123,TRUE 等。</p>
<p>### 向量</p>
<p>多个标量组成的一维的数据结构，比如 Vector。</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 生成向量</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1990</span><span class="op">:</span><span class="fl">2019</span><span class="op">)</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code>##  [1] 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999
## [11] 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009
## [21] 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019</code></pre>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">b</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6</code></pre>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="fl">3</span><span class="op">)</span> <span class="co">#repeat 前三个字母</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] "A" "A" "A"</code></pre>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from<span class="op">=</span><span class="fl">1</span>,to<span class="op">=</span><span class="fl">10</span>,by<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="co">#sequence 前三个字母</span></span>
<span><span class="va">d</span></span></code></pre></div>
<pre><code>## [1] 1 3 5 7 9</code></pre>
<ul>
<li><p>矩阵 (matrix)，数据框 (data.frame)， tipple</p></li>
<li><p>列表 (list) 与数组 (array)</p></li>
</ul>
</div>
</div>
<div id="函数" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> 函数<a class="anchor" aria-label="anchor" href="#%E5%87%BD%E6%95%B0"><i class="fas fa-link"></i></a>
</h2>
<div id="函数的结构" class="section level3" number="6.4.1">
<h3>
<span class="header-section-number">6.4.1</span> 函数的结构<a class="anchor" aria-label="anchor" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E7%BB%93%E6%9E%84"><i class="fas fa-link"></i></a>
</h3>
<p>R 语言函数一般由三个部分构成：函数体（body），参数（formals） , 环境（environment）。可以通过相应的函数查看函数的相应部分。以常见的 “粘贴” 函数 paste() 为例：</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># paste() 函数可以将两个向量对应的元素粘贴在一起。</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"C"</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span>,sep <span class="op">=</span> <span class="st">":"</span>,collapse <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] "A:1" "B:2" "C:3"</code></pre>
<p>我们分别使用 body， formals, environment 函数查看 paste() 函数的相应部分。</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看函数结构</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/body.html">body</a></span><span class="op">(</span><span class="va">paste</span><span class="op">)</span></span></code></pre></div>
<pre><code>## .Internal(paste(list(...), sep, collapse, recycle0))</code></pre>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看函数参数</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/formals.html">formals</a></span><span class="op">(</span><span class="va">paste</span><span class="op">)</span></span></code></pre></div>
<pre><code>## $...
## 
## 
## $sep
## [1] " "
## 
## $collapse
## NULL
## 
## $recycle0
## [1] FALSE</code></pre>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看函数来自哪个包</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/environment.html">environment</a></span><span class="op">(</span><span class="va">paste</span><span class="op">)</span></span></code></pre></div>
<pre><code>## &lt;environment: namespace:base&gt;</code></pre>
</div>
<div id="函数的功能" class="section level3" number="6.4.2">
<h3>
<span class="header-section-number">6.4.2</span> 函数的功能<a class="anchor" aria-label="anchor" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%8A%9F%E8%83%BD"><i class="fas fa-link"></i></a>
</h3>
<p>函数就像一个加工厂，可以将 “原料” 通过一系列转变，然后输出相应的 “产品”</p>
<div class="inline-figure"><img src="images/paste-6127D1C1.png" style="width:100.0%"></div>
<p>这里的输入，可以是某个值、向量、 data.frame，或者是其他类型的数据；</p>
<p>输出，可以是数据，文档，图片等等。</p>
</div>
<div id="函数的分类" class="section level3" number="6.4.3">
<h3>
<span class="header-section-number">6.4.3</span> 函数的分类<a class="anchor" aria-label="anchor" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB"><i class="fas fa-link"></i></a>
</h3>
<p>R 语言的函数包括内置函数，外来函数（R 包），自编函数三大类。</p>
<ul>
<li>实用的内置函数</li>
</ul>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看R语言自带数据集</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 描述性统计类</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 生成随机数</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n <span class="op">=</span> , min <span class="op">=</span> , max <span class="op">=</span> <span class="op">)</span> <span class="co"># uniform，生成 n 个服从均匀分布的小数</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>n<span class="op">=</span>,min<span class="op">=</span>,max<span class="op">=</span><span class="op">)</span>,<span class="co"># round() 函数空值小数点的位数</span></span>
<span>      digits <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="co"># 生成 n 个服从均匀分布的整数</span></span></code></pre></div>
<ul>
<li>实用的外来函数（tidyverse）</li>
</ul>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 根据变量取值进行筛选</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 选择变量</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 生成变量</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 排序</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># 分组统计</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>演示（使用R自带数据）</li>
</ul>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 加载数据</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"ToothGrowth"</span><span class="op">)</span></span>
<span><span class="co"># 查看表头</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "len"  "supp" "dose"</code></pre>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看数据结构</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 'data.frame':    60 obs. of  3 variables:
##  $ len : num  4.2 11.5 7.3 5.8 6.4 10 11.2 11.2 5.2 7 ...
##  $ supp: Factor w/ 2 levels "OJ","VC": 2 2 2 2 2 2 2 2 2 2 ...
##  $ dose: num  0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...</code></pre>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 查看分组变量的取值</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">ToothGrowth</span><span class="op">$</span><span class="va">supp</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] VC OJ
## Levels: OJ VC</code></pre>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 生成变量（生成两个标签）</span></span>
<span><span class="va">ToothGrowth</span> <span class="op">&lt;-</span> <span class="va">ToothGrowth</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>剂量<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">dose</span><span class="op">==</span><span class="fl">0.5</span>,<span class="st">"0.5mg"</span>,</span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">dose</span><span class="op">==</span><span class="fl">1.0</span>,<span class="st">"1.0mg"</span>,<span class="st">"2.0mg"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>补充喂养<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">supp</span><span class="op">==</span><span class="st">"VC"</span>,<span class="st">" 维 C"</span>,<span class="st">" 橙汁"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 分组统计</span></span>
<span><span class="va">summary_data</span> <span class="op">&lt;-</span> <span class="va">ToothGrowth</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">补充喂养</span>, <span class="va">剂量</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    n<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    mean<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">len</span><span class="op">)</span>,</span>
<span>    sd<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">len</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>自编函数</li>
</ul>
</div>
<div id="查看函数帮助" class="section level3" number="6.4.4">
<h3>
<span class="header-section-number">6.4.4</span> 查看函数帮助<a class="anchor" aria-label="anchor" href="#%E6%9F%A5%E7%9C%8B%E5%87%BD%E6%95%B0%E5%B8%AE%E5%8A%A9"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 如果知道具体的函数名字：</span></span>
<span><span class="op">?</span> <span class="co"># 查看函数的帮助，比如 ?filter</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># 同？</span></span>
<span><span class="op">?</span><span class="op">?</span> <span class="co"># 查看 R 包的帮助，比如??dplyr</span></span>
<span><span class="co"># 如果不知道具体的函数名字</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">apropos</a></span><span class="op">(</span><span class="st">"norm"</span><span class="op">)</span><span class="co"># apropos: 就... 而言</span></span></code></pre></div>
</div>
</div>
<div id="向量及其操作" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> 向量及其操作<a class="anchor" aria-label="anchor" href="#%E5%90%91%E9%87%8F%E5%8F%8A%E5%85%B6%E6%93%8D%E4%BD%9C"><i class="fas fa-link"></i></a>
</h2>
<p>向量为一系列标量的集合</p>
<div id="创建向量" class="section level3" number="6.5.1">
<h3>
<span class="header-section-number">6.5.1</span> 创建向量<a class="anchor" aria-label="anchor" href="#%E5%88%9B%E5%BB%BA%E5%90%91%E9%87%8F"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="向量的类型" class="section level3" number="6.5.2">
<h3>
<span class="header-section-number">6.5.2</span> 向量的类型<a class="anchor" aria-label="anchor" href="#%E5%90%91%E9%87%8F%E7%9A%84%E7%B1%BB%E5%9E%8B"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>字符串，数值， logical 类型</li>
</ul>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 字符串型：</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"B"</span>,<span class="st">"C"</span>,<span class="st">"C"</span><span class="op">)</span></span>
<span><span class="co"># 数值类型</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># logical 类型</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">T</span>,<span class="cn">T</span>,<span class="cn">F</span>,<span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>因子类型</li>
</ul>
<p>R 语言有一类非常重要的变量类型，名为因子（factor）。因子可以视为分类变量的特殊类型，它既有值，又对值进行了排序（levels）。</p>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 如何生成因子</span></span>
<span><span class="va">name1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">name2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">name1</span>,</span>
<span>                levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, <span class="co">#levels 必须与原始数据取值相同</span></span>
<span>                labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Male"</span>,<span class="st">"Female"</span>,<span class="st">"Both"</span><span class="op">)</span><span class="op">)</span> <span class="co">#labels 是为了</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">name1</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">name2</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "factor"</code></pre>
</div>
<div id="向量的运算" class="section level3" number="6.5.3">
<h3>
<span class="header-section-number">6.5.3</span> 向量的运算<a class="anchor" aria-label="anchor" href="#%E5%90%91%E9%87%8F%E7%9A%84%E8%BF%90%E7%AE%97"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 简单统计</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 10.5</code></pre>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 算数运算</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">2</span><span class="op">*</span><span class="va">a</span> <span class="co"># 标量与向量</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">+</span><span class="va">a</span> <span class="co"># 标量与向量</span></span></code></pre></div>
</div>
<div id="重要向量的循环补齐机制" class="section level3" number="6.5.4">
<h3>
<span class="header-section-number">6.5.4</span> 重要：向量的循环补齐机制<a class="anchor" aria-label="anchor" href="#%E9%87%8D%E8%A6%81%E5%90%91%E9%87%8F%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%A1%A5%E9%BD%90%E6%9C%BA%E5%88%B6"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"C"</span>,<span class="st">"D"</span>,<span class="st">"E"</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span>,sep <span class="op">=</span> <span class="st">":"</span><span class="op">)</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] "A:1" "B:2" "C:3" "D:1" "E:2"</code></pre>
<div class="inline-figure"><img src="images/paste-8810BCB7.png" style="width:100.0%"></div>
</div>
<div id="交并补" class="section level3" number="6.5.5">
<h3>
<span class="header-section-number">6.5.5</span> 交、并、补<a class="anchor" aria-label="anchor" href="#%E4%BA%A4%E5%B9%B6%E8%A1%A5"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 向量的交、并、补集，找不同，找相同，找不同（背熟）</span></span>
<span></span>
<span><span class="co"># 取交集</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">intersect</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span> </span></code></pre></div>
<pre><code>## [1] 10 11 12 13 14 15</code></pre>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 取并集</span></span>
<span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">union</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17
## [18] 18 19 20</code></pre>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 找不同</span></span>
<span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">setdiff</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7 8 9</code></pre>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">setdiff</a></span><span class="op">(</span><span class="va">b</span>,<span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 16 17 18 19 20</code></pre>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 去除重复</span></span>
<span><span class="va">aa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="fl">3</span><span class="op">)</span>,<span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">aa</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "A" "4" "5" "6"</code></pre>
</div>
<div id="向量的下标索引" class="section level3" number="6.5.6">
<h3>
<span class="header-section-number">6.5.6</span> 向量的下标索引<a class="anchor" aria-label="anchor" href="#%E5%90%91%E9%87%8F%E7%9A%84%E4%B8%8B%E6%A0%87%E7%B4%A2%E5%BC%95"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 已经知道向量 x</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">" 张三"</span>,<span class="st">" 小明"</span>,<span class="st">" 王五"</span>,<span class="st">" 李思齐"</span><span class="op">)</span></span>
<span><span class="co"># 如何选择李思齐？</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] " 李思齐"</code></pre>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 如何同时选择小明与李思齐？</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] " 小明"   " 李思齐"</code></pre>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 如何不选择张三</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] " 小明"   " 王五"   " 李思齐"</code></pre>
</div>
</div>
<div id="数据框及其操作" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> 数据框及其操作<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%8F%8A%E5%85%B6%E6%93%8D%E4%BD%9C"><i class="fas fa-link"></i></a>
</h2>
<p>数据框是 R 语言最常用的二维表。</p>
<div id="生成数据框" class="section level3" number="6.6.1">
<h3>
<span class="header-section-number">6.6.1</span> 生成数据框<a class="anchor" aria-label="anchor" href="#%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E6%A1%86"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 通过 read.csv 函数等读取</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 通过向量组合生成</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fl">30</span>,<span class="fl">18</span>,<span class="fl">26</span><span class="op">)</span></span>
<span><span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">" 赵"</span>,<span class="st">" 钱"</span>,<span class="st">" 孙"</span>,<span class="st">" 李"</span><span class="op">)</span></span>
<span><span class="va">score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">99</span>,<span class="fl">65</span>,<span class="fl">77</span>,<span class="fl">88</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>age<span class="op">=</span><span class="va">age</span>,</span>
<span>                 name<span class="op">=</span><span class="va">name</span>,</span>
<span>                 score<span class="op">=</span><span class="va">score</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="数据框的下标索引" class="section level3" number="6.6.2">
<h3>
<span class="header-section-number">6.6.2</span> 数据框的下标索引<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E7%9A%84%E4%B8%8B%E6%A0%87%E7%B4%A2%E5%BC%95"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 数据框下标索引中间有逗号，逗号前表示行，逗号后表示列 [row,col]</span></span>
<span><span class="co"># 选择 df 前两列</span></span>
<span><span class="va">df</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span> <span class="co"># 空着表示全选</span></span></code></pre></div>
<pre><code>## [1] " 赵" " 钱" " 孙" " 李"</code></pre>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="co"># 选择 df 前两行</span></span></code></pre></div>
<pre><code>##   age name score
## 2  30   钱    65</code></pre>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">]</span> <span class="co"># 选择 df 第二行第二列</span></span></code></pre></div>
<pre><code>## [1] " 钱"</code></pre>
<div class="sourceCode" id="cb171"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="op">-</span><span class="fl">3</span>,<span class="op">]</span> <span class="co"># 不选择第三行</span></span></code></pre></div>
<pre><code>##   age name score
## 1  20   赵    99
## 2  30   钱    65
## 4  26   李    88</code></pre>
<div class="sourceCode" id="cb173"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span>,<span class="fl">2</span><span class="op">]</span> <span class="co"># 选择 1， 3 行； 2 列</span></span></code></pre></div>
<pre><code>## [1] " 赵" " 孙"</code></pre>
<div class="sourceCode" id="cb175"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">name</span><span class="op">==</span><span class="st">" 李"</span>,<span class="op">]</span> <span class="co"># 选择姓李的数据</span></span></code></pre></div>
<pre><code>##   age name score
## 4  26   李    88</code></pre>
</div>
<div id="数据框如何生成新的列" class="section level3" number="6.6.3">
<h3>
<span class="header-section-number">6.6.3</span> 数据框如何生成新的列<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90%E6%96%B0%E7%9A%84%E5%88%97"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 比如生成身高数据</span></span>
<span><span class="va">height</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">178</span>,<span class="fl">180</span>,<span class="fl">169</span>,<span class="fl">175</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">height</span> <span class="op">&lt;-</span> <span class="va">height</span></span>
<span><span class="va">df</span></span></code></pre></div>
<pre><code>##   age name score height
## 1  20   赵    99    178
## 2  30   钱    65    180
## 3  18   孙    77    169
## 4  26   李    88    175</code></pre>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="r%E5%AE%89%E8%A3%85%E4%B8%8E%E5%85%A5%E9%97%A8.html"><span class="header-section-number">5</span> R安装与入门</a></div>
<div class="next"><a href="nhanes%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D.html"><span class="header-section-number">7</span> NHANES数据库介绍</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#r%E5%85%A5%E9%97%A8-1"><span class="header-section-number">6</span> R入门</a></li>
<li>
<a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%8B%BE%E9%81%97"><span class="header-section-number">6.1</span> 基础拾遗</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rstudio-%E8%AE%BE%E7%BD%AE"><span class="header-section-number">6.1.1</span> Rstudio 设置</a></li>
<li><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-r-%E8%84%9A%E6%9C%AC"><span class="header-section-number">6.1.2</span> 创建一个 R 脚本</a></li>
<li><a class="nav-link" href="#%E6%BC%94%E7%A4%BA"><span class="header-section-number">6.1.3</span> 演示：</a></li>
<li><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="header-section-number">6.1.4</span> 一些快捷键</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="header-section-number">6.2</span> 数据基本操作</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="header-section-number">6.2.1</span> 读取数据</a></li>
<li><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE"><span class="header-section-number">6.2.2</span> 选择数据</a></li>
<li><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE"><span class="header-section-number">6.2.3</span> 保存数据</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="header-section-number">6.3</span> 数据类型与数据结构</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="header-section-number">6.3.1</span> 常见的数据类型</a></li>
<li><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-naninf-na-null"><span class="header-section-number">6.3.2</span> 特殊数据类型： NaN,Inf， NA， NULL</a></li>
<li><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="header-section-number">6.3.3</span> 数据类型的转换</a></li>
<li><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="header-section-number">6.3.4</span> 数据结构</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="header-section-number">6.4</span> 函数</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E7%BB%93%E6%9E%84"><span class="header-section-number">6.4.1</span> 函数的结构</a></li>
<li><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="header-section-number">6.4.2</span> 函数的功能</a></li>
<li><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB"><span class="header-section-number">6.4.3</span> 函数的分类</a></li>
<li><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%87%BD%E6%95%B0%E5%B8%AE%E5%8A%A9"><span class="header-section-number">6.4.4</span> 查看函数帮助</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E5%90%91%E9%87%8F%E5%8F%8A%E5%85%B6%E6%93%8D%E4%BD%9C"><span class="header-section-number">6.5</span> 向量及其操作</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%90%91%E9%87%8F"><span class="header-section-number">6.5.1</span> 创建向量</a></li>
<li><a class="nav-link" href="#%E5%90%91%E9%87%8F%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="header-section-number">6.5.2</span> 向量的类型</a></li>
<li><a class="nav-link" href="#%E5%90%91%E9%87%8F%E7%9A%84%E8%BF%90%E7%AE%97"><span class="header-section-number">6.5.3</span> 向量的运算</a></li>
<li><a class="nav-link" href="#%E9%87%8D%E8%A6%81%E5%90%91%E9%87%8F%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%A1%A5%E9%BD%90%E6%9C%BA%E5%88%B6"><span class="header-section-number">6.5.4</span> 重要：向量的循环补齐机制</a></li>
<li><a class="nav-link" href="#%E4%BA%A4%E5%B9%B6%E8%A1%A5"><span class="header-section-number">6.5.5</span> 交、并、补</a></li>
<li><a class="nav-link" href="#%E5%90%91%E9%87%8F%E7%9A%84%E4%B8%8B%E6%A0%87%E7%B4%A2%E5%BC%95"><span class="header-section-number">6.5.6</span> 向量的下标索引</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%8F%8A%E5%85%B6%E6%93%8D%E4%BD%9C"><span class="header-section-number">6.6</span> 数据框及其操作</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E6%A1%86"><span class="header-section-number">6.6.1</span> 生成数据框</a></li>
<li><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E7%9A%84%E4%B8%8B%E6%A0%87%E7%B4%A2%E5%BC%95"><span class="header-section-number">6.6.2</span> 数据框的下标索引</a></li>
<li><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A1%86%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90%E6%96%B0%E7%9A%84%E5%88%97"><span class="header-section-number">6.6.3</span> 数据框如何生成新的列</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/06_R_basis.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/06_R_basis.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>临床预测模型</strong>" was written by 杨 弘. It was last built on 2022-11-30.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
